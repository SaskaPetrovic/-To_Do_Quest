function e(e){return e.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t){const r=n(e);return Array.from(r.reduce((e,r)=>(function(e,t){const r=e[t];return Array.isArray(r)?r:[]}(r,t).forEach(t=>e.add(t)),e),new Set))}function n(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function a([t,r]){return function(t,r){const n=`${l=t,l.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}-value`,a=function(e){const t=function(e){const t=s(e.type);if(t){const r=i(e.default);if(t!==r)throw new Error(`Type "${t}" must match the type of the default value. Given default value: "${e.default}" as "${r}"`);return t}}(e),r=i(e),n=s(e),a=t||r||n;if(a)return a;throw new Error(`Unknown value type "${e}"`)}(r);var l;return{type:a,key:n,name:e(n),get defaultValue(){return function(e){const t=s(e);if(t)return u[t];const r=e.default;return void 0!==r?r:e}(r)},get hasCustomDefaultValue(){return void 0!==i(r)},reader:c[a],writer:o[a]||o.default}}(t,r)}function s(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function i(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}(()=>{try{!function(){const e=function(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}(function(){this.a.call(this)});e.prototype.a=function(){},new e}()}catch(e){return e=>class extends e{}}})();const u={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},c={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError("Expected array");return t},boolean:e=>!("0"==e||"false"==e),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Expected object");return t},string:e=>e},o={default:function(e){return`${e}`},array:l,object:l};function l(e){return JSON.stringify(e)}class h{constructor(e){this.context=e}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:n=this.identifier,bubbles:a=!0,cancelable:s=!0}={}){const i=new CustomEvent(n?`${n}:${e}`:e,{detail:r,bubbles:a,cancelable:s});return t.dispatchEvent(i),i}}h.blessings=[function(e){return r(e,"classes").reduce((e,r)=>{return Object.assign(e,{[`${n=r}Class`]:{get(){const{classes:e}=this;if(e.has(n))return e.get(n);{const t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${t(n)}Class`]:{get(){return this.classes.has(n)}}});var n},{})},function(e){return r(e,"targets").reduce((e,r)=>{return Object.assign(e,{[`${n=r}Target`]:{get(){const e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${t(n)}Target`]:{get(){return this.targets.has(n)}}});var n},{})},function(e){const r=function(e,t){return n(e).reduce((e,t)=>(e.push(...function(e,t){const r=e.values;return r?Object.keys(r).map(e=>[e,r[e]]):[]}(t)),e),[])}(e),s={valueDescriptorMap:{get(){return r.reduce((e,t)=>{const r=a(t),n=this.data.getAttributeNameForKey(r.key);return Object.assign(e,{[n]:r})},{})}}};return r.reduce((e,r)=>Object.assign(e,function(e){const r=a(e),{key:n,name:s,reader:i,writer:u}=r;return{[s]:{get(){const e=this.data.get(n);return null!==e?i(e):r.defaultValue},set(e){void 0===e?this.data.delete(n):this.data.set(n,u(e))}},[`has${t(s)}`]:{get(){return this.data.has(n)||r.hasCustomDefaultValue}}}}(r)),s)}],h.targets=[],h.values={};class d extends h{connect(){this.hasIncrementValue||(this.incrementValue=this._setDefaultIncrement()),this.minWidthValue=this.widthValue||0}updateProgressBar(){let e=!1;if("radio"===event.target.type){const t=this.element.querySelectorAll(`[name="${event.target.name}"]`);e=!Array.from(t).some(e=>Boolean(event.target.dataset.filled)&&JSON.parse(event.target.dataset.filled)),t.forEach(e=>e.dataset.filled=!0),event.target.dataset.filled=!1}else e=event.target.validity.valid&&!event.target.validity.valueMissing||event.target.checked;if(e){if(event.target.dataset.filled&&JSON.parse(event.target.dataset.filled))return;this._incrementBar(this.incrementValue),event.target.dataset.filled=!0}else event.target.validity.valueMissing&&(this._decrementBar(this.incrementValue),event.target.dataset.filled=!1)}widthValueChanged(){this.widthValue>=100?this.widthValue=100:this.widthValue<=this.minWidthValue&&(this.widthValue=this.minWidthValue),this.barTarget.style.width=`${this.widthValue}%`}_incrementBar(e){this.widthValue+=e}_decrementBar(e){this.widthValue-=e}_setDefaultIncrement(){let e=new Set(Array.from(this.element.querySelectorAll("[data-action*='progress-bar#updateProgressBar']")).map(e=>e.name)).size;return(100-this.minWidthValue)/e}}d.targets=["bar"],d.values={width:Number,increment:Number,minWidth:Number};export{d as ProgressBar};
//# sourceMappingURL=stimulus-form-progress-bar.modern.js.map
